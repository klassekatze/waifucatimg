<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.0.1">
    <title>WAI FU</title>

    

    <!-- Bootstrap core CSS -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <!-- Bootstrap core CSS -->
<link href="css/bootstrap.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
	  
	  .cover {
	  object-fit: cover;
	  max-height: 350px;
	  object-position: center top;
		}
		.hidden {
  display:none !important;
	}
	div.fullwidth {
		min-width: 100% !important;
	}
}
    </style>
    <!-- Custom styles for this template -->
    <link href="dashboard.css" rel="stylesheet">
	<link href="pricing.css" rel="stylesheet">
  </head>
  <body>
	<div class="screenshader hidden" style="position:fixed;
            z-index: 50000; /* above everything else */
            top:0; left:0; bottom:0; right:0;
            background:rgba(0,0,0,.5);
"> </div>
  
    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">WAIFU</a>
  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <input class="form-control form-control-dark w-100 SEARCHBOX" type="text" placeholder="Search" aria-label="Search">
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <!--<a class="nav-link" href="#">Sign out</a>-->
    </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="sidebar-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="#" data-target="introduction">
              Introduction</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-target="world_selection">
              World Selection</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"  data-target="controls_binding_selection">
              Controls (Binding)</span>
            </a>
          </li>
		  <li class="nav-item">
            <a class="nav-link" href="#"  data-target="controls_lure_selection">
              Controls (Lure)</span>
            </a>
          </li>
		  <li class="nav-item">
            <a class="nav-link" href="#"  data-target="controls_other_selection">
              Controls (Other)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-target="perk_selection">
              Perks</span>
            </a>
          </li>
		  <li class="nav-item">
            <a class="nav-link" href="#" data-target="waifu_selection">
              Waifu Selection<div class="waifu_selection_spinner spinner-border spinner-border-sm" role="status"><span class="sr-only">Loading...</span></div></span>
            </a>
          </li>
		  <li class="nav-item">
            <a class="nav-link" href="#" data-target="waifu_perk_selection">
              Waifu Perks</span>
            </a>
          </li>
		  
          
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>Current Selections</span>
          <!--<a class="d-flex align-items-center text-muted" href="#" aria-label="Add a new report">-->
           <!--  <span data-feather="plus-circle"></span>-->
          </a>
        </h6>
		
		<div class="nav flex-column mb-2 nav-link side_summary">
		Initial Budget: 1000<br>
		<br>
		Minamoto-no-Raikou (T7)<br>
		<span class="text-danger">-100</span> (900)<br>
		<br>
		Remaining Budget: <span class="text-success">900</span>
		</div>
        <ul class="nav flex-column mb-2">
		
		
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Last quarter
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Social engagement
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Year-end sale
            </a>
          </li>
        </ul>
      </div>
    </nav>

	<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
		<br><br>
		<div class="container introduction">
		<!--INTRODUCTION-->
		<p>Waifu Catalog, interactive!</p>
		
		<p>First, pick a starting world. Depending on that world’s intensity, measured on a scale from 1 to 10, you’ll be assigned a number of credits with which to make the rest of your purchases. Intensities are weighed based on the power of the typical combatants, the average danger level to ordinary people living in that world, and especially the actual cost of what might be needed to survive in that world. Active apocalyptic scenarios may raise a world’s intensity by one or even two tiers. <strike>Specific worlds and their intensity ratings are listed in the second page of the spreadsheet. If your world is not on the list, compare it to the ones that are and use your best judgement.</strike></p>
		
		<p>In this interactive catalog, it is not necessary to refer to a spreadsheet. Instead, click on the navigation entry on the left of the page labeled 'World Selection' when you are ready to select a world or intensity. While the interactive catalog does not support explicitly entering a custom intensity or world, you can simply select an arbitrary world of the appropriate intensity tier as a placeholder. At checkout, an agent will judge and apply any custom destinations.</p>
		
		<p>Once you have selected a world, the budget will be displayed below the navigation list on the left. You may then proceed to the next page. Repeat this process until you have made all desired selections. Feel free to return to previous pages - selections will be retained so long as the page is not reloaded or closed.
		
		<p>Pick one Binding-type control and as many of the Lure-type controls, Perks, and waifus as you can afford. The waifu lists begin on page 3 of the spreadsheet. Third-party waifu lists are also allowed and may be found elsewhere.</p>
		
		<p>The Company’s Waifus are all clones manufactured on demand. Waifus are sorted into eleven tiers, each of which has a different cost. See the table on the first page of the spreadsheet for details. “Capturing” a waifu in her homeworld adds that number of credits to your account. Capture credits are not granted for local versions of waifus you’ve purchased or alternate versions of waifus you’ve already captured once, unless they’re a higher-tiered variant. If you only wanted a capture for her credit value, you may ship her to the Company for the rest of her full purchase value; they’ll reprocess her and send her where she needs to go. Otherwise, captured waifus are yours to keep.</p>
		
		<p>Tier 11 waifus are listed in the interactive catalog, with a value of 999,999. However, they CANNOT be pre-purchased with normal credits. T11 waifus are listed solely for customer convenience should you use the catalog as a planning aid.
		
		<p>If you DO want to start with a T11 waifu, then this interactive catalog is of limited use. The only way to start with one removes most options for pre-purchasing other features. Read the fine print, and contact an agent directly. For reference, an excerpt is reproduced below.</p>
		
		<p>"Tier 11 waifus have no listed price and may not be purchased at any intensity below 11 without a special ticket. If you choose this instead, ignore the entire list of regular waifus. Instead, go to the Tier 11 list on the fifth page of the spreadsheet and spend your special ticket on one and only one of the waifus there. Some Tier 11 waifus are instead listed as Waifu Perks below; they may be chosen too. Heavenbuilt Proto and its AI, and Piece of Silver also count as Tier 11 waifus for this purpose. Captured Tier 11 waifus may be shipped back to the Company for an additional ticket, on top of the reward for capturing one in the first place. If you ever find yourself with a spare Tier 11 ticket and nobody you want to spend it on, you may exchange it for 2000 credits; this cannot be undone."</p>
		
		<p>"The following non-waifu items are free in Intensity 11, if you want them: a single Binding-type control, all Lure-type controls, Psychic Paper, Sweet Home, Warranty Plan, all Talents and Defenses, and a 500 credit budget for Catch-a-Ride. If you wish, you may Possess your Tier 11 waifu, become an Extra, or Substitute into a target character of Tier 3 or lower. You may start in any world you like, regardless of the above intensity restrictions. If you start in your waifu’s homeworld, you may also take Yoink. All Tier 11 waifus have multiversal travel, including Heavenbuilt Proto, so go anywhere you want, follow the special rules, and have fun."<p/>
		
		
		
		
		
		
		
		
		
		
		<!--INTRO END -->
		</div>
		
		<div class="container controls_binding_selection hidden">
			<div class="mb-3 text-center">
				<div class="card-deck mb-3 text-center BINDING_CARDS">
				</div>
			</div>
		</div>
		<div class="container controls_lure_selection hidden">
			<div class="mb-3 text-center">
				<div class="card-deck mb-3 text-center LURE_CARDS">
				</div>
			</div>
		</div>
		<div class="container controls_other_selection hidden">
			<div class="mb-3 text-center">
				<div class="card-deck mb-3 text-center OTHER_CARDS">
				</div>
			</div>
		</div>
		
		<div class="container waifu_selection hidden">
			<div class="mb-3 text-center">
				<div class="card-deck mb-3 text-center WAIFU_CARDS">

		<div class="card mb-4 shadow-sm null">
			<!--null card-->
		</div>
		<div class="card mb-4 shadow-sm null">
			<!--null card-->
		</div>

				</div>
			</div>
		</div>
		
		<div class="container world_selection hidden">
			<div class="mb-3 text-center">
				<div class="card-deck mb-3 text-center SETTING_CARDS">
				
					<div class="card mb-4 shadow-sm"
					data-name="Bleach"
					data-tier="1"
					data-budget="13"
					>
						<div class="card-header"><h4 class="my-0 font-weight-normal">Bleach</h4></div>
						<div class="card-body">
							<h1 class="card-title pricing-card-title"><small class="text-muted">Tier:</small> 1</h1>
							Condition: far from Karakura<br>
							<h1 class="card-title pricing-card-title"><small class="text-muted">Budget:</small> 13</h1>
							<br>
							<div class="d-flex justify-content-between align-items-center">
								<button type="button" class="world_select_btn btn btn-lg btn-block btn-outline-success">Select</button>
							</div>
						</div>
					</div>
				
				
					<div class="card mb-4 shadow-sm null">
						<!--null card-->
					</div>
					<div class="card mb-4 shadow-sm null">
						<!--null card-->
					</div>
				
				</div>
			</div>
		</div>
	</main>
	
  </div>
</div>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
        <script src="dashboard.js"></script></body>
		<script type="text/javascript" src="js/loading-spinner.js"></script>
		
	<script>
	/*
	(function () {
  'use strict'

  feather.replace()

  
}())
	*/



$( document ).ready(function()
{
	Spinner();
	Spinner.show();
	$('.screenshader').removeClass('hidden');

	var world=
	{
		name:'',
		tier:0,
		budget:0
	};
	//var budget = 0;
	
	var waifus = [];
	
	function addwaifu(waifu)
	{
		for(var i = 0; i < waifus.length; i++)
		{
			var w = waifus[i];
			if(w.name == waifu.name)return;
		}
		waifus.push(waifu);
	}
	function remwaifu(waifu)
	{
		for(var i = 0; i < waifus.length; i++)
		{
			var w = waifus[i];
			if(w.name == waifu.name)
			{
				waifus.splice(i, 1);
				return;
			}
		}
	}
	
	/*<div class="nav flex-column mb-2 nav-link side_summary">
		Initial Budget: 1000<br>
		<br>
		Minamoto-no-Raikou (T7)<br>
		<span class="text-danger">-100</span> (900)<br>
		<br>
		Remaining Budget: <span class="text-success">900</span>
		</div>
        <ul class="nav flex-column mb-2">
		*/
	
	
	function updateSideSummary()
	{
		var s = $('.side_summary');
		s.empty();
		
		var html = 'World: '+world.name+' (T'+world.tier+')<br>'+
		'Initial Budget: <span class="text-success">'+world.budget+'</span><br><br>';
		
		var budget = world.budget;
		
		for(var i = 0; i < waifus.length; i++)
		{
			var w = waifus[i];
			budget -= w.cost;
			html += w.name+' (T'+w.tier+')<br><span class="text-danger">-'+w.cost+'</span> ('+budget+')<br>';
		}
		html += '<br>ENDING BUDGET: ';
		if(budget > 0)html += '<span class="text-success">';
		else if(budget < 0)html += '<span class="text-danger">';
		html += budget;
		if(budget != 0)html += '</span>';
		
		s.html(html);
	}
	updateSideSummary();

	feather.replace()
 
	function getcard(element)
	{
		element = $(element);
		if(element.hasClass('card'))return element;
		else
		{
			return element.closest('.card');
		}
	}
 
 
	function onChanged()
	{
		var query = $('.SEARCHBOX').val().toLowerCase();
		console.log('q='+query);
		//Spinner.show();
		$('.card').each( function( index, element )
		{
			
			var e = $(element);
			if(query == '' || e.text().toLowerCase().indexOf(query) != -1)e.removeClass('hidden');
			else e.addClass('hidden');
			
			if(e.hasClass('nullcard'))e.removeClass('hidden');
		});
		//Spinner.hide();
	}
	function registerSidebarAndSearch()
	{
		var timeoutHandle=0;
		$('.SEARCHBOX').on('input', function()
		{
			console.log('k');
			window.clearTimeout(timeoutHandle);
			timeoutHandle = window.setTimeout(onChanged,250);
		});
		
		$('.nav-link').on('click', function()
		{
			//Spinner.show();
			var e = $(this);
			var target = e.attr('data-target');
			$('.nav-link').removeClass('active');
			e.addClass('active');
			$('div.container').addClass('hidden');
			$('.'+target).removeClass('hidden');
			/*$('div.container').each( function( index, element )
			{
				var e = $(element);
				if(e.hasClass(target))e.removeClass('hidden');
				//else e.addClass('hidden');
			});*/
			
			//Spinner.hide();
		});
	}
	
	
	function registerButtons()
	{
		$('.world_select_btn').on('click', function()
		{
			var e = $(this);
			$('.world_select_btn').removeClass('btn-success');
			$('.world_select_btn').addClass('btn-outline-success');
			$('.world_select_btn').text('Select');
			
			e.removeClass('btn-outline-success');
			e.addClass('btn-success');
			e.text('Selected');
			
			var card = getcard(e);
			world.name = card.attr('data-name');
			world.tier = card.attr('data-tier');
			budget = world.budget = card.attr('data-budget');
			updateSideSummary();
		});
		
		$('.btn_waifu').on('click', function()
		{
			var e = $(this);
			var card = getcard(e);
			var titlebar = $('.card-header',card);
			
			var waifu = {
			name: card.attr('data-name'),
			tier: card.attr('data-tier'),
			cost: card.attr('data-cost')
			};
			
			var bought = e.hasClass('bought');
			if(bought)
			{
				titlebar.removeClass('bg-success');
				e.removeClass('bought');
				e.removeClass('btn-danger');
				e.addClass('btn-success');
				e.text('Buy');
				remwaifu(waifu);
			}else
			{
				titlebar.addClass('bg-success');
				e.addClass('bought');
				e.addClass('btn-danger');
				e.removeClass('btn-success');
				e.text('Unbuy');
				addwaifu(waifu);
				
			}
			updateSideSummary();
		});
	}
	
	var loads = 0;
	
	
	var fn_assemble_data_cards = function(){};
	
	function buttonReReg()
	{
		registerButtons();
		registerSidebarAndSearch();
	}
	function lc_fin()
	{
		console.log('lc_fin');
		fn_assemble_data_cards();
		//registerButtons();
		//registerSidebarAndSearch();
		Spinner.hide();
		$('.screenshader').addClass('hidden');
	}
	
	
	
	function lc()
	{
		loads -= 1;
		console.log('loads='+loads);
		if(loads <= 0)window.setTimeout(lc_fin,10);
	}
	var cachebust = function()
	{
		var ret = '';
		while(ret.length < 10)
		{
			ret = ret+Math.floor(Math.random() * 10);
		}
		return ret;
	}
	//This hack is so I can newline and null tab my descriptions in my json, fuck you too javascript.
	var JSON_CONVERTER = {
		'text json': function(result)
		{
			var mod = false;
			if(result && result != '')
			{
				var in_str = false;
				for(var c = 0; c < result.length; c++)
				{
					var tok = result[c];
					if(tok == '"')in_str = !in_str;
					if(in_str)
					{
						if(tok == '\n')
						{
							result = result.substring(0,c) + '\\n' + result.substring(c+2,result.length);
							mod=true;
						}else if(tok == '\t')
						{
							result = result.substring(0,c) + result.substring(c+1,result.length);
							mod=true;
							c -= 1;
						}
					}
				}
			}
			try
			{
				if (typeof JSON === 'object' && typeof JSON.parse === 'function')
				{
					return JSON.parse(result);
				}else
				{
					return $.parseJSON(result);
				}
			} catch (e)
			{
				console.log("Warning: Could not parse expected JSON response.");
				console.log(e);
				if(mod)console.log(result);
				return {};
			}
		}
	};
	
	
	
	var catalog_database = {};
	var control_database = [];
	
	//var jqxhr = $.ajax( "example.php" )
	loads += 1; $('.SETTING_CARDS').load( "setting_cards.html"+'?x='+cachebust(), lc );
	loads += 1; $.getJSON({url: 'catalog_database.json?x='+cachebust(),converters: JSON_CONVERTER}, function(json) { catalog_database = json; lc(); })
	.fail( function(d, textStatus, error) {
        alert("getJSON failed, status: " + textStatus + ", error: "+error)
    });
	loads += 1; $.getJSON({url: 'control_database.json?x='+cachebust(),converters: JSON_CONVERTER}, function(json) { control_database = json; lc(); })
	.fail( function(d, textStatus, error) {
        alert("getJSON failed, status: " + textStatus + ", error: "+error)
    });
	$('.WAIFU_CARDS').load( "waifu_cards.html"+'?x='+cachebust(), function(){ $('.waifu_selection_spinner').addClass('hidden'); buttonReReg(); } );
	
	function escapeRegExp(string) {
		return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
	}
	String.prototype.replaceAll = function(find, replace)
	{
		return this.replace(new RegExp(escapeRegExp(find), 'g'), replace);
	};
	
	fn_assemble_data_cards = function()
	{
		console.log('fn_assemble_data_cards');
		var cards = '';
		
		var cards_binding = '';
		var cards_lure = '';
		var cards_other = '';
		
		//BINDING_CARDS
		
		for(var i =0; i < control_database.length; i++)
		{
			var entry = control_database[i];
			
			var card = 
			'<div class="card mb-4 box-shadow fullwidth">\
				<div class="card-header">\
					<h4 class="my-0 font-weight-normal">'+entry.name+'</h4>\
				</div>\
				<div class="card-body">';
				var cost = entry.start_cost > 0 ? entry.start_cost : 'Free';
				if(entry.max_purchase > 1 && entry.addition_cost != entry.start_cost)card += 'Initial Cost:';
				else card += 'Cost: ';
				card += cost+'<br>';
				if(entry.max_purchase > 1 && entry.addition_cost != entry.start_cost)
				{
					card += entry.addition_cost+' each after initial purchase.<br>';
				}
				if(entry.max_purchase > 1 && entry.max_purchase < 9999 && (!('subitems' in entry) || entry.max_purchase != entry.subitems.length))
				{
					card += 'Limit '+entry.max_purchase+'.<br>';
				}
				card += '<br>';
				var desc = entry.description.replaceAll('\n','<br><br>');
				card += desc;
				
				if(!('subitems' in entry) || entry.subitems.length == 0)
				{
				//<div class="d-flex justify-content-between align-items-center">\ </div>\
					var buttonbar = '<br><br>\
						<div class="btn-group">\
							<button type="button" class="btn btn-lg btn-success">Purchase</button>\
					</div>';
					card += buttonbar;
				}else
				{
					var list = '<br><br><ul class="list-group pull-left" style="text-align: left;">';
					for(var s = 0; s < entry.subitems.length; s++)
					{
						var se = entry.subitems[s];
						list += '<li class="list-group-item list-group-item-secondary"><button type="button" class="btn btn-sm btn-success mr-3">Purchase</button>'+se+'</li>';
					}
					list += '</ul>';
					card += list;
				}
				
				card += '</div>\
			</div>';
			if(entry.type == 'Binding')cards_binding += card;
			
		}
		$('.BINDING_CARDS').html(cards_binding);
		
	}
	
	
});
	</script>
</html>
